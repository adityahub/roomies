<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script>
      AFRAME.registerComponent('video-handler', {
        init: function () {
          var el = this.el;
          var video = el.getAttribute('material').src;
          
          if (video) {
            video.addEventListener('error', function(e) {
              console.error('Video error:', e);
              el.setAttribute('material', 'src', '#fallback-image');
            });
            
            video.addEventListener('loadeddata', function() {
              console.log('Video loaded successfully');
            });
          }

          el.addEventListener('click', function () {
            if (video && video.paused) {
              video.play().catch(function(error) {
                console.error('Error attempting to play video:', error);
              });
            }
          });
        }
      });
    </script>
  </head>
  <body>
    <a-scene>
      <a-assets>
        <video id="video" src="https://storage.googleapis.com/webfundamentals-assets/videos/chrome.webm" loop crossorigin="anonymous" muted playsinline></video>
        <img id="fallback-image" src="https://picsum.photos/1920/1080" crossorigin="anonymous">
      </a-assets>

      <!-- Floor -->
      <a-plane position="0 0 0" rotation="-90 0 0" width="20" height="20" material="src: #video" video-handler></a-plane>

      <!-- Walls -->
      <a-plane position="0 5 -10" width="20" height="10" material="src: #video" video-handler></a-plane>
      <a-plane position="10 5 0" rotation="0 -90 0" width="20" height="10" material="src: #video" video-handler></a-plane>
      <a-plane position="0 5 10" rotation="0 180 0" width="20" height="10" material="src: #video" video-handler></a-plane>
      <a-plane position="-10 5 0" rotation="0 90 0" width="20" height="10" material="src: #video" video-handler></a-plane>

      <!-- Camera -->
      <a-entity position="0 1.6 0">
        <a-camera>
          <a-cursor></a-cursor>
        </a-camera>
      </a-entity>
    </a-scene>
  </body>
</html>
